{% extends 'employee/main.employee_base.html' %}
{% block title %}Dashboard - Available Car{% endblock %}
{% block content %}

<div class="container-fluid" style="min-height: 100vh; padding: 0;">
    <div class="row" style="height: 100%;">
        <div class="col-12" style="height: 100%; display: flex; flex-direction: column; justify-content: space-between;">
            <h2 class="text-center my-3">Available Cars</h2>
            
            <!-- Table to Display Cars -->
            <div class="table-container" style="overflow-x: auto; flex-grow: 1;">
                <table id="carTable" class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Car Number</th>
                            <th>Make</th>
                            <th>Model</th>
                            <th>Year</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="carTableBody">
                        <!-- Rows will be dynamically added here -->
                    </tbody>
                </table>
            </div>

            <!-- Pagination Controls at the Bottom -->
            <div class="pagination" id="paginationControls" style="text-align: center; margin-top: 20px;">
                <!-- Buttons will be dynamically added here -->
            </div>
        </div>
    </div>
</div>

<script>
    // Random data generator for cars
    const carData = [];
    const totalCars = 30;  // Total number of cars for demonstration

    for (let i = 1; i <= totalCars; i++) {
        carData.push({
            carNumber: 'ABC' + (1000 + i),
            carMake: 'Make ' + i,
            carModel: 'Model ' + i,
            carYear: 2000 + (i % 25),
            carStatus: (i % 3 === 0) ? 'Sold' : 'Available'
        });
    }

    const carsPerPage = 10;
    let currentPage = 1;

    // Function to render the car table based on the current page
    function renderTable() {
        const startIndex = (currentPage - 1) * carsPerPage;
        const endIndex = startIndex + carsPerPage;
        const currentCars = carData.slice(startIndex, endIndex);

        const tableBody = document.getElementById('carTableBody');
        tableBody.innerHTML = '';  // Clear the previous rows

        currentCars.forEach((car, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${startIndex + index + 1}</td>
                <td>${car.carNumber}</td>
                <td>${car.carMake}</td>
                <td>${car.carModel}</td>
                <td>${car.carYear}</td>
                <td>${car.carStatus}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Function to render pagination controls
    function renderPagination() {
        const paginationControls = document.getElementById('paginationControls');
        const totalPages = Math.ceil(carData.length / carsPerPage);

        let paginationHTML = '';
        if (currentPage > 1) {
            paginationHTML += `<a href="#" onclick="changePage(${currentPage - 1})" class="btn btn-primary"> < Previous - </a>`;
        }


        if (currentPage < totalPages) {
            paginationHTML += `<a href="#" onclick="changePage(${currentPage + 1})" class="btn btn-primary"> - Next></a>`;
        }

        paginationControls.innerHTML = paginationHTML;
    }

    // Function to change the page
    function changePage(page) {
        currentPage = page;
        renderTable();
        renderPagination();
    }

    // Initialize the table and pagination
    renderTable();
    renderPagination();
</script>

{% endblock %}
